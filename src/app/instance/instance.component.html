<main>
	<header>
		<form>
			<mat-form-field appearance="fill">
				<mat-label>{{"w√§hle Instanz"|translate}}</mat-label>
				<mat-select [formControl]="instanceNamen">
					<mat-option *ngFor="let instance of instanceNamenList|async" [value]="instance">
						<a mat-list-item routerLink="/instance/{{instance}}">{{instance}}</a>
					</mat-option>
				</mat-select>
			</mat-form-field>
			<span class="badge"></span>
			<button type="button" (click)="openFilterDialog()">{{"Filtern"|translate}}</button>
		</form>
	</header>
	<!-- ------------------------------------>

	<body>
		<h2>{{"Die Instanzen"|translate}}: </h2>
		<app-grid>
			<app-tile
				*ngFor="let instance of filteredInstancesObservable|async; let i = index;">
				<!-- [ngClass]="worstStatusArr[i]" -->
				
				
				<span>{{worstStatusArr[i]}}</span>
				<br>
				<span>
					<a routerLink="/instance/{{instance.name}}">
						<span class="badge">{{instance.name}}</span>
					</a>
					<br>
					<ng-container *ngIf="instance.status === 'stopped'">
						<canvas class="dot_offline"> </canvas>
					</ng-container>
					<ng-container *ngIf="!(instance.status === 'stopped') ">
						<ng-container *ngFor="let service of instance.services">
							<span class="items" *ngIf="isActivatedService(service.name)">
								<span *ngIf="isRunningGreen(service.status)">
									<ng-container [ngSwitch]="service.status">
										<canvas class="dot_running"> </canvas>
									</ng-container>
								</span>
								<span *ngIf="isRunningYellow(service.status)">
									<ng-container [ngSwitch]="service.status">
										<canvas class="dot_slow"> </canvas>
									</ng-container>
								</span>
								<span *ngIf="isRunningRed(service.status)">
									<ng-container [ngSwitch]="service.status">
										<canvas class="dot_error"> </canvas>
									</ng-container>
								</span>
								<span>
									&nbsp;
									{{service.name}}
									&nbsp;
								</span>
							</span>
						</ng-container>
					</ng-container>
				</span>
			</app-tile>
		</app-grid>
		<h2>{{"Schlechtester Status jeder Instanz"|translate}}: </h2>
		<app-grid>
			<app-tile *ngFor="let instance of filteredInstancesObservable|async">
				<ng-container>
					<canvas class="dot_{{getStatus(instance)}}"> </canvas>
					&nbsp;
				</ng-container>
				<a routerLink="/instance/{{instance.name}}">
					<span class="badge">{{instance.name}}</span> </a>
				<br>
			</app-tile>
		</app-grid>
	</body>
</main>

<ng-template #worstStatus> </ng-template>